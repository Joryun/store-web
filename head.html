
<!-- //for-mobile-apps -->
<!-- Custom Theme files -->
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<link href="css/fasthover.css" rel="stylesheet" type="text/css" media="all" />
<link href="css/popuo-box.css" rel="stylesheet" type="text/css" media="all" />
<!-- //Custom Theme files -->
<!-- font-awesome icons -->
<link href="css/font-awesome.css" rel="stylesheet">
<!-- //font-awesome icons -->
<!-- js -->
<script src="js/jquery.min.js"></script>

<link rel="stylesheet" href="css/jquery.countdown.css" />
<!-- countdown -->
<!-- //js -->
<!-- web fonts -->
<link href='http://fonts.googleapis.com/css?family=Glegoo:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic'
    rel='stylesheet' type='text/css'>

<!-- for bootstrap working -->
<script type="text/javascript" src="js/bootstrap-3.1.1.min.js"></script>
<!-- //for bootstrap working -->

<script src="js/global.js"></script>
<script src="js/api.js"></script>

<!-- 进入主页，弹出框是否弹出控制 -->

<!-- header modal -->

<!--  登录弹出 start -->
<div class="modal fade" id="myModal88" tabindex="-1" role="dialog" aria-labelledby="myModal88" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <!-- 登录，注册弹出框面板 -->
        <div id="modal-content" class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;</button>
                <h4 class="modal-title" id="myModalLabel">Don't Wait, Login now!</h4>
            </div>
            <div class="modal-body modal-body-sub">
                <div class="row">
                    <div class="col-md-8 modal_body_left modal_body_left1" style="border-right: 1px dotted #C2C2C2;padding-right:3em;">
                        <div class="sap_tabs">
                            <div id="horizontalTab" style="display: block; width: 100%; margin: 0px;">
                                <ul>
                                    <li class="resp-tab-item" aria-controls="tab_item-0">
                                        <span>Sign in</span>
                                    </li>
                                    <li class="resp-tab-item" aria-controls="tab_item-1">
                                        <span>Sign up</span>
                                    </li>
                                </ul>
                                <div class="tab-1 resp-tab-content" aria-labelledby="tab_item-0">
                                    <div class="facts">
                                        <div class="register">
                                            <input id="sign-in-phone" name="Phone" placeholder="Mobile Phone" type="text" maxlength="11" required="">
                                            <input id="sign-in-password" name="Password" placeholder="Password" type="password" required="">
                                            <div class="sign-up">
                                                <input type="submit" onclick="userLogin();" value="Sign in" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-1 resp-tab-content" aria-labelledby="tab_item-1">
                                    <div class="facts">
                                        <div class="register">
                                            <form action="#" method="post">
                                                <input type="text" placeholder="Mobile Phone" name="Phone" id="phone" required="" />
                                                <input type="text" placeholder="Verification Code" name="code" id="code" style="margin-top: 14px;width: 60%" />
                                                <div class="shore-input-span" style="width:40%;display:initial;">
                                                    <span class="code code-get" id="getCode" onclick="getCode();">获取验证码</span>
                                                    <span class="code code-num" id="getNum" style="display: none">已发送验证码</span>
                                                </div>

                                                <div class="sign-up">
                                                    <input type="submit" value="Create Account" />
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <script src="js/easyResponsiveTabs.js" type="text/javascript"></script>
                        <script type="text/javascript">
                            $(document).ready(function () {
                                $('#horizontalTab').easyResponsiveTabs({
                                    type: 'default', //Types: default, vertical, accordion           
                                    width: 'auto', //auto or any width like 600px
                                    fit: true // 100% fit in a container
                                });
                            });
                        </script>
                        <div id="OR" class="hidden-xs">OR</div>
                    </div>
                    <div class="col-md-4 modal_body_right modal_body_right1">
                        <div class="row text-center sign-with">
                            <div class="col-md-12">
                                <h3 class="other-nw">Sign in with</h3>
                            </div>
                            <div class="col-md-12">
                                <ul class="social">
                                    <li class="social_facebook">
                                        <a href="#" class="entypo-facebook"></a>
                                    </li>
                                    <li class="social_dribbble">
                                        <a href="#" class="entypo-dribbble"></a>
                                    </li>
                                    <li class="social_twitter">
                                        <a href="#" class="entypo-twitter"></a>
                                    </li>
                                    <li class="social_behance">
                                        <a href="#" class="entypo-behance"></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 个人信息面板 -->
        <div id="user-info-content" class="modal-content" style="display:none">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;</button>
                <h4 class="modal-title" id="myModalLabel1">USER INFO</h4>
            </div>
            <div class="modal-body modal-body-sub">
                <div class="row">
                    <div class="col-md-8 modal_body_left modal_body_left1" style="border-right: 1px dotted #C2C2C2;padding-right:3em;">
                        <div class="sap_tabs">
                            <div id="horizontalTab1" style="display: block; width: 100%; margin: 0px;">
                                <ul>
                                    <li class="resp-tab-item" aria-controls="tab_item-2">
                                        <span>Base</span>
                                    </li>
                                    <li class="resp-tab-item" aria-controls="tab_item-3">
                                        <span>Bind</span>
                                    </li>
                                    <li class="resp-tab-item" aria-controls="tab_item-4">
                                        <span>Account</span>
                                    </li>
                                </ul>
                                <div class="tab-1 resp-tab-content" aria-labelledby="tab_item-2">
                                    <div class="facts">
                                        <div class="register">
                                            账号：
                                            <input id="user-account" name="account" type="text" value="" readonly="readonly" /> 用户名：
                                            <input id="user-nickname" name="nickname" type="text" value="" /> 真名：
                                            <input id="user-realName" name="realName" type="text" value="" /> 生日：
                                            <input id="user-birthday" name="birthday" type="text" value="" /> 邮箱：
                                            <input id="user-email" name="email" type="email" value="" />

                                            <div class="sign-up">
                                                <input type="submit" onclick="updateUserInfo();" value="Update" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-1 resp-tab-content" aria-labelledby="tab_item-3">
                                    <div class="facts">
                                        <div class="register">

                                            <input type="text" placeholder="Mobile Phone" name="bind-phone" id="bind-phone" required="" />
                                            <input type="text" placeholder="Verification Code" name="bind-code" id="bind-code" style="margin-top: 14px;width: 60%" />
                                            <div class="shore-input-span" style="width:40%;display:initial;">
                                                <span class="code code-get" onclick="getCode();">获取验证码</span>
                                                <span class="code code-num" style="display: none">已发送验证码</span>
                                            </div>

                                            <div class="sign-up">
                                                <input type="submit" value="Bind" />
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div class="tab-1 resp-tab-content" aria-labelledby="tab_item-4">
                                    <div class="facts">
                                        <div class="register">
                                            <input id="set-password-account" name="set-password-account" placeholder="Account" type="text" required="">
                                            <input id="set-password" name="set-password" placeholder="Password" type="password" required="">
                                            <div class="sign-up">
                                                <input type="submit" onclick="setPassword();" value="Set" />
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <script type="text/javascript">
                            $(document).ready(function () {
                                $('#horizontalTab1').easyResponsiveTabs({
                                    type: 'default', //Types: default, vertical, accordion           
                                    width: 'auto', //auto or any width like 600px
                                    fit: true // 100% fit in a container
                                });
                            });
                        </script>

                    </div>
                    <!-- <div class="col-md-4 modal_body_right modal_body_right1">
							<div class="row text-center sign-with">
								<div class="col-md-12">
									<h3 class="other-nw">Sign in with</h3>
								</div>
								<div class="col-md-12">
									<ul class="social">
										<li class="social_facebook">
											<a href="#" class="entypo-facebook"></a>
										</li>
										<li class="social_dribbble">
											<a href="#" class="entypo-dribbble"></a>
										</li>
										<li class="social_twitter">
											<a href="#" class="entypo-twitter"></a>
										</li>
										<li class="social_behance">
											<a href="#" class="entypo-behance"></a>
										</li>
									</ul>
								</div>
							</div>
						</div> -->
                </div>
            </div>

        </div>
    </div>
</div>
<!--  登录弹出 end -->

<!-- header modal -->
<!-- header -->
<div class="header" id="home1">
    <div class="container">
        <div class="w3l_login">
            <a href="#" data-toggle="modal" data-target="#myModal88">
                <span id="default-icon" class="glyphicon glyphicon-user" aria-hidden="true"></span>
                <img id="headImage" src="http://osnwk5h1c.bkt.clouddn.com/image/store/default-head-image.jpeg" style="width:50px;height:50px;display:none;"
                />
            </a>
        </div>
        <div class="w3l_logo">
            <h1>
                <a href="index.html">Yo Store
                    <span>Your stores. Your place.</span>
                </a>
            </h1>
        </div>
        <div class="search">
            <input class="search_box" type="checkbox" id="search_box">
            <label class="icon-search" for="search_box">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
            </label>
            <div class="search_form">
                <form action="#" method="post">
                    <input type="text" name="Search" placeholder="Search...">
                    <input type="submit" value="Send">
                </form>
            </div>
        </div>
        <div class="cart cart box_1">
            <form action="#" method="post" class="last">
                <input type="hidden" name="cmd" value="_cart" />
                <input type="hidden" name="display" value="1" />
                <button class="w3view-cart" type="submit" name="submit" value="">
                    <i class="fa fa-cart-arrow-down" aria-hidden="true"></i>
                </button>
            </form>
        </div>
    </div>
</div>
<!-- //header -->

<script>
    $(document).ready(function () {
        pre();
    });
    async function pre() {
        // 1、判断LocalStorage 2、判断token是否有效或过期
        var token = getLocalStorage('token') || '';
        if (token.length == 0) {
            toLogin();
            return
        }
        if (token.length > 0) {
            // 获取用户信息
            var userInfo = await getUserInfo();

            if (isEmptyObject(userInfo)) {
                await toLogin();
                return;
            }

            // --- token存在且有效 ---

            $('#myModal88').modal('hide');
            // 替换图标
            imgOperation(userInfo);

            // --- 获取主分类数据，替换PRODUCTS里的选项 ---			
            var categoryList = await getCategoryList();

            var point = 1;

            var formList1 = '';
            var formList2 = '';
            var formList3 = '';

            for (let i = 0; i < categoryList.length; i++) {
                const element = categoryList[i];

                var secondCategoryList = await getSecondCategoryList(element.id);
                if (point == 1) {
                    formList1 += '<ul class="multi-column-dropdown"><h6>' + element.name + '</h6>';
                    for (let j = 0; j < secondCategoryList.length; j++) {
                        let secondCategoryItem = secondCategoryList[j];
                        formList1 += '<li><a href="javascript:;" onclick="getProductPage(' + secondCategoryItem.id + ');">' +
                            secondCategoryItem.name +
                            '</a></li>';
                    }
                    formList1 += '</ul>';
                }
                if (point == 2) {
                    formList2 += '<ul class="multi-column-dropdown"><h6>' + element.name + '</h6>';
                    for (let j = 0; j < secondCategoryList.length; j++) {
                        let secondCategoryItem = secondCategoryList[j];
                        // formList2 += '<li><a href="javascript:;" onclick="' + getProductPage(secondCategoryItem.id); + '">' +
                        // 	secondCategoryItem.name +
                        // 	'</a></li>';
                        formList2 += '<li><a href="javascript:;" onclick="getProductPage(' + secondCategoryItem.id + ');">' +
                            secondCategoryItem.name +
                            '</a></li>';
                    }
                    formList2 += '</ul>';
                }
                if (point == 3) {
                    formList3 += '<ul class="multi-column-dropdown"><h6>' + element.name + '</h6>';
                    for (let j = 0; j < secondCategoryList.length; j++) {
                        let secondCategoryItem = secondCategoryList[j];
                        formList3 += '<li><a href="javascript:;" onclick="getProductPage(' + secondCategoryItem.id + ');">' +
                            secondCategoryItem.name +
                            '</a></li>';
                    }
                    formList3 += '</ul>';
                }
                ++point;
            }
            $('#category-mobile').html(formList1);
            $('#category-computer').html(formList2);
            $('#category-electrical').html(formList3);
        }

        // 替换默认登录注册弹出框 -> 个人头像
        async function imgOperation(userMsg) {
            var userInfo = userMsg;
            var headImage = userInfo.headImage;
            if (headImage == null || headImage.length == 0) {
                headImage = "http://osnwk5h1c.bkt.clouddn.com/image/store/default-head-image.jpeg";
            }
            $('#default-icon').css("display", "none");
            $('#headImage').show();
            $('#headImage').attr("src", headImage);

            // 替换弹出框内容 -> 个人信息展示

            // 填充个人信息
            $('#user-account').attr("value", userInfo.account);
            $('#user-nickname').attr("value", userInfo.nickname);
            $('#user-realName').attr("value", userInfo.realName);
            $('#user-birthday').attr("value", userInfo.birthday);
            $('#user-email').attr("value", userInfo.email);

            $('#modal-content').hide();
            $('#user-info-content').show();
        }
    }

    // 获取产品列表
    async function getProductPage(secondCategoryItemId) {
        window.location.href = 'products.html?secondCategoryItemId=' + secondCategoryItemId;
    }
</script>

<!-- navigation -->
<div class="navigation">
    <div class="container">
        <nav class="navbar navbar-default">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header nav_2">
                <button type="button" class="navbar-toggle collapsed navbar-toggle1" data-toggle="collapse" data-target="#bs-megadropdown-tabs">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="bs-megadropdown-tabs">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="index.html" class="act">Home</a>
                    </li>

                    <!-- Mega Menu -->
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Products
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu multi-column columns-3">
                            <div class="row">
                                <div id="category-mobile" class="col-sm-3">

                                </div>

                                <div id="category-computer" class="col-sm-3">

                                </div>

                                <div id="category-electrical" class="col-sm-2">

                                </div>

                                <div class="col-sm-4">
                                    <div class="w3ls_products_pos">
                                        <h4>入驻店铺
                                            <i>JOIN</i>
                                        </h4>
                                        <a href="#">
                                            <img src="http://osnwk5h1c.bkt.clouddn.com/image/store/new-shop.png" alt=" " class="img-responsive" />
                                        </a>
                                    </div>

                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </ul>
                    </li>
                    <!-- <li>
							<a href="about.html">About Us</a>
						</li> -->


                    <li class="w3pages">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Orders
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="orderList.html">List</a>
                            </li>
                            <li>
                                <a href="orderHistory.html">History</a>
                            </li>
                        </ul>
                    </li>

                    <li class="w3pages">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Pages
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="icons.html">Web Icons</a>
                            </li>
                            <li>
                                <a href="codes.html">Short Codes</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="mail.html">Mail Us</a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</div>
<!-- //navigation -->
<!-- banner -->
<div class="banner">
    <div class="container">
        <h3>Electronic Store,
            <span>Special Offers</span>
        </h3>
    </div>
</div>
<!-- //banner -->